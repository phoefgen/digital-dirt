"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function getData(t){fetch("http://localhost:1337/data.streetfoodapp.com/1.1/schedule/vancouver/").then(function(n){n.json().then(function(n){t(n)})})}function buildList(){ko.applyBindings(trucks)}function getTrucks(){getData(function(t){var n=Object.keys(t.vendors),i=n.length,e=[];console.log(t);for(var o=0;o<i;o++){var r=t.vendors[n[o]];void 0!==t.vendors[n[o]].last&&e.push(r)}for(var a=0;a<e.length;a++)trucks.push(new truck(e[a],a));buildList()})}function initMap(){truckMap=new google.maps.Map(document.getElementById("map"),{zoom:13,center:{lat:49.246292,lng:-123.116226}}),getTrucks()}var _createClass=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),trucks=ko.observableArray(),truckMap="",infowindow=void 0,truck=function(){function t(n,i){_classCallCheck(this,t),this.name=n.name,this.email=n.email,this.rating=n.rating,this.description_long=n.description,this.id=i,this.position={lat:n.last.latitude,lng:n.last.longitude},null!==n.description_short?this.description_short=n.description_short:this.description_short=" ",this.infowindowContent=this.createInfoWindowContent(),this.infowindow=new google.maps.InfoWindow({content:this.infowindowContent}),this.marker=this.createMarker(this.name,this.position,this.infowindow,this.id)}return _createClass(t,[{key:"createMarker",value:function(t,n,i,e){var o=new google.maps.Marker({title:t,icon:"../img/truck.png",position:n,animation:google.maps.Animation.DROP});return window.google.maps.event.addListener(o,"click",function(){trucks().forEach(function(t){t.infowindow.close(truckMap,t.marker)});var t=trucks()[e];t.infowindow.open(truckMap,t.marker)}),o}},{key:"createInfoWindowContent",value:function(){return'<div id="truckDetail">\n                    <h1>'+this.name+"</h1>\n                    <h3>"+this.description_short+"</h3>\n                    <p>"+this.description_long+"</p>\n                    "}}]),t}();